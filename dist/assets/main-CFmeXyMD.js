import{B as ge,x as Ye,g as F,c as G,a as ie,o as Xe,s as X,b as $e,R as ze}from"./Button-CSUjAzpC.js";import{I as We}from"./Input-C7iLCaMH.js";import{T as qe}from"./Textarea-Bepvwn6N.js";const Je={options:ge.rxList().isRequired,value:ge.any.default(()=>Ye(null))};function Se(t,{createElement:e}){const{options:n,value:r}=t,s=n.createSelection(r),i={display:"flex",gap:F.medium};return e("div",{as:"root",style:i},s.map(([a,o])=>e(Qe,{as:"option",selected:o,option:a,"$root:onClick":()=>r(a)})))}Se.propTypes=Je;function Ue({selected:t,option:e},{createElement:n}){const r={display:"flex",gap:F.small,alignItems:"center",cursor:"pointer"},s=16,i=2,a=1;return n("div",{as:"root",style:r},n("div",{style:()=>({width:s,height:s,borderRadius:s/2,padding:i,boxSizing:"border-box",background:"transparent",border:`${a}px solid ${t()?G.primaryBlue:"#fff"}`})},()=>t()?n("div",{style:{width:s-a*2-i*2,height:s-a*2-i*2,borderRadius:(s-a*2-i*2)/2,background:G.primaryBlue}}):null),n("div",null,e.label))}function Qe({selected:t,option:e},{createElement:n}){return n("div",{as:"root","props:selected":t,"props:option":e,style:()=>({color:"#fff",borderRadius:4,padding:`${F.small}px ${F.large}px`,cursor:"pointer",background:t()?G.primaryBlue:G.itemBg,"&:hover":{background:G.primaryBlue}})},e.label)}function Ze(t,e){if(t===e)return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s of n)if(t[s]!==e[s])return!1;return!0}function et(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const tt=Object.getOwnPropertyNames(Array.prototype),nt=new Set(tt.filter(t=>typeof Array.prototype[t]=="function")),rt=t=>nt.has(t),st=Object.prototype.hasOwnProperty,ne=(t,e)=>st.call(t,e),R=Array.isArray,oe=t=>ue(t)==="[object Map]",at=t=>ue(t)==="[object Set]",ce=t=>typeof t=="string",le=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",ot=Object.prototype.toString,ue=t=>ot.call(t),ct=t=>ue(t).slice(8,-1),W=t=>(t==null?void 0:t.constructor)===Object||(t==null?void 0:t.constructor)===Array,lt=t=>ce(t)&&(t[0]==="0"||t[0]==="1"||t[0]==="2"||t[0]==="3"||t[0]==="4"||t[0]==="5"||t[0]==="6"||t[0]==="7"||t[0]==="8"||t[0]==="9"),he=t=>ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Oe=(t,e)=>!Object.is(t,e),q=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ut=t=>{const e=ce(t)?Number(t):NaN;return isNaN(e)?t:e};function ye(t){return typeof t=="string"||typeof t=="number"}function De(t){return W(t)||R(t)||oe(t)||at(t)}function I(t,e){if(!t)throw new Error(e)}var v=(t=>(t.SKIP="__v_skip",t.IS_REACTIVE="__v_isReactive",t.IS_ATOM="__v_isAtom",t.IS_READONLY="__v_isReadonly",t.IS_SHALLOW="__v_isShallow",t.RAW="__v_raw",t))(v||{});const Ee=t=>{const e=new Set(t);return e.w=0,e.n=0,e},xe=t=>(t.w&h.trackOpBit)>0,Ce=t=>(t.n&h.trackOpBit)>0,ht=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=h.trackOpBit},ft=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];xe(s)&&!Ce(s)?s.delete(t):e[n++]=s,s.w&=~h.trackOpBit,s.n&=~h.trackOpBit}e.length=n}};var p=(t=>(t.ATOM="atom",t.GET="get",t.HAS="has",t.ITERATE="iterate",t.METHOD="method",t.EXPLICIT_KEY_CHANGE="explicit_key_change",t))(p||{}),d=(t=>(t.ATOM="atom",t.SET="set",t.ADD="add",t.DELETE="delete",t.CLEAR="clear",t.METHOD="method",t.EXPLICIT_KEY_CHANGE="explicit_key_change",t))(d||{});const dt=new WeakSet,Ve=new WeakMap;function pt(t){return new Proxy({},{get(e,n){const r=function(...i){return Z(i[0],n),t(...i)},s=Me(t);return r.debug=function(...i){return Z(i[0],n),s(...i)},r}})}function gt(t){return new Proxy({},{get(e,n){return function(...r){return Z(r[0],n),t(...r)}}})}function Me(t){return function(...e){return dt.add(e[0]),t(...e)}}function yt(t){return Ve.get(t)}function Z(t,e){return Ve.set(t,e)}function D(t,e,n){let r=t;function s(c){if(arguments.length===0)return h.instance.track(l,p.ATOM,"value"),r;if(r===c)return;const u=r;r=c,h.instance.trigger(l,d.ATOM,{key:"value",newValue:c,oldValue:u})}const i={get(c,u){return u==="raw"?r:u===v.IS_ATOM?!0:(W(r)&&h.instance.track(l,p.ATOM,"value"),Reflect.get(W(r)?r:a,u))},set(c,u,f){return typeof r=="object"?Reflect.set(r,u,f):!1},getPrototypeOf(){return r&&typeof r=="object"?Reflect.getPrototypeOf(r):null}},[a,o]=e?e(s,i):[s,i];Object.assign(a,{[Symbol.toPrimitive](c){return h.instance.track(l,p.ATOM,"value"),(!c||c==="default")&&ye(r)||c==="number"&&typeof r=="number"?r:c==="string"?ye(r)?r.toString():Object.prototype.toString.call(r):null}}),n&&Z(a,n),q(a,v.IS_ATOM,!0);const l=new Proxy(a,o);return l}D.as=new Proxy({},{get(t,e){return(n,r)=>D(n,r,e)}});function S(t){return!!(t&&t.__v_isAtom)}const _e=class ${static collectEffect(){const e=[];return $.collectFrames.push(e),()=>(I($.collectFrames.at(-1)===e,"collect effect frame error"),$.collectFrames.pop())}constructor(){const e=$.collectFrames.at(-1);e&&e.push(this)}destroy(){}};_e.collectFrames=[];let Et=_e;const Re=class j extends Et{constructor(e){super(),this.active=e,this.deps=[],this.children=[],this.index=0,e&&j.activeScopes.length&&(this.parent=j.activeScopes.at(-1),this.parent.children.push(this),this.index=this.parent.children.length-1)}static destroy(e,n){var r;if(e.active){if(e.cleanup(),e.active=!1,e.parent&&!n){const s=e.parent.children.pop();s!==e&&(e.parent.children[e.index]=s,s.index=e.index)}delete e.parent,e.children.forEach(s=>{j.destroy(s,!0)}),e.children=[],(r=e.onDestroy)==null||r.call(e,e)}}effectFn(){}run(...e){if(!this.active)return this.effectFn();if(j.activeScopes.includes(this))throw new Error("recursive effect call");try{return h.trackOpBit=1<<++h.instance.effectTrackDepth,j.activeScopes.push(this),h.instance.enableTracking(),h.instance.effectTrackDepth<=ae?ht(this):this.cleanup(),this.children.forEach(n=>j.destroy(n,!0)),this.children=[],this.effectFn()}finally{h.instance.effectTrackDepth<=ae&&ft(this),h.instance.resetTracking(),j.activeScopes.pop(),h.trackOpBit=1<<--h.instance.effectTrackDepth}}cleanup(){const{deps:e}=this;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(this);e.length=0}}destroy(){j.destroy(this)}};Re.activeScopes=[];let N=Re;function mt(t,e){if(Array.isArray(t))t.splice(0,1/0,...e);else if(W(t)){const n=Object.keys(e);Object.keys(t).filter(r=>!n.includes(r)).forEach(r=>delete t[r]),Object.assign(t,e)}else if(t instanceof Map){for(const n of t.keys())e.has(n)?t.set(n,e.get(n)):t.delete(n);for(const n of e.keys())t.has(n)||t.set(n,e.get(n))}else t instanceof Set?(t.forEach(n=>{e.has(n)||t.delete(n)}),e.forEach(n=>{t.has(n)||t.add(n)})):I(!1,"unknown source type to replace data")}const He=new WeakMap;function kt(t){const e=He.get(t);N.destroy(e)}class re extends N{constructor(e,n,r,s,i,a,o){if(super(!!e),this.getter=e,this.applyPatch=n,this.callbacks=s,this.skipIndicator=i,this.forceAtom=a,this.keepRaw=o,this.isDirty=!1,this.immediate=!1,this.recomputing=!1,this.triggerInfos=[],this.effectFramesArray=[],this.keyToEffectFrames=new WeakMap,this.recompute=(c=!1)=>{var u,f;if(!(!this.isDirty&&!c)){if((f=(u=this.callbacks)==null?void 0:u.onRecompute)==null||f.call(u,this.data),c||!this.applyPatch){const g=super.run();this.replaceData(g)}else h.instance.pauseTracking(),this.applyPatch.call(this,this.data,this.triggerInfos),h.instance.resetTracking(),this.triggerInfos.length=0;this.isDirty=!1}},this.manualTrack=(c,u,f)=>{h.instance.enableTracking();const g=h.instance.track(S(c)?c:T(c),u,f);return h.instance.resetTracking(),g},this.collectEffect=N.collectEffect,this.destroyEffect=N.destroy,!e)return;typeof r=="function"?this.scheduleRecompute=r:this.immediate=!0,s!=null&&s.onDestroy&&(this.onDestroy=s.onDestroy),s!=null&&s.onTrack&&(this.onTrack=s.onTrack);const l=super.run();this.data=this.keepRaw?l:this.forceAtom?D(l):De(l)?J(l):D(l),this.keepRaw||He.set(this.data,this)}get debugName(){return yt(this.data)}effectFn(){if(this.applyPatch){h.instance.pauseTracking();const e=this.getter.call(this);return h.instance.resetTracking(),e}else return this.getter.call(this)}run(e){var n;(n=this.skipIndicator)!=null&&n.skip||(this.triggerInfos.push(...e),this.isDirty=!0,this.immediate?this.recompute():this.scheduleRecompute(this.recompute))}replaceData(e){S(this.data)?(me.get(this.data.raw)&&me.get(this.data.raw)(this.data.raw),this.data(e)):mt(this.data,e)}}function B(t,e,n,r,s,i){return new re(t,e,n,r,s,i).data}function Q(t,e,n,r,s){return new re(t,e,n,r,s,!0).data}B.as=pt(B);B.debug=Me(B);const me=new WeakMap,C=Symbol("iterate"),ee=Symbol("Map key iterate"),ae=30,Pe=class z{constructor(){this.targetMap=new WeakMap,this.arrayExplicitKeyDepCount=new WeakMap,this.shouldTrack=!0,this.effectTrackDepth=0,this.frameStack=[],this.triggerStack=[],this.shouldTrigger=!0,this.trackStack=[],this.effectsInSession=new Set,this.effectsInSessionPayloads=new WeakMap,this.inEffectSession=!1,this.isDigesting=!1,this.sessionDepth=0,this.track=(e,n,r)=>{if(!N.activeScopes.at(-1)||!this.shouldTrack)return;let s=this.targetMap.get(e);s||this.targetMap.set(e,s=new Map);let i=s.get(r);i||s.set(r,i=Ee());const a=void 0;if(R(e)&&lt(r)){let o=this.arrayExplicitKeyDepCount.get(e)||0;this.arrayExplicitKeyDepCount.set(e,++o)}return this.trackEffects(i,a),i}}static get instance(){return z._instance||(z._instance=new z)}createEffectSession(){this.isDigesting||(this.inEffectSession=!0,this.sessionDepth++)}scheduleEffect(e,n,r){this.effectsInSession.add(e);let s=this.effectsInSessionPayloads.get(e);s||this.effectsInSessionPayloads.set(e,s=[]),s.push(n)}digestEffectSession(){if(this.isDigesting||(this.sessionDepth--,this.sessionDepth>0))return;this.isDigesting=!0;const e=this.effectsInSession[Symbol.iterator]();let n;for(;n=e.next().value;){const r=this.effectsInSessionPayloads.get(n);n.run(r),this.effectsInSession.delete(n),this.effectsInSessionPayloads.delete(n)}this.inEffectSession=!1,this.isDigesting=!1}trackEffects(e,n){const r=N.activeScopes.at(-1);if(!r)return;let s=!1;this.effectTrackDepth<=ae?Ce(e)||(e.n|=z.trackOpBit,s=!xe(e)):s=!e.has(r),s&&(e.add(r),r.deps.push(e),this.frameStack.length&&this.frameStack.at(-1).deps.push(e))}trigger(e,n,r,s){if(!this.shouldTrigger)return;const i={...r,source:e,type:n},{key:a,newValue:o,oldValue:l}=i,c=this.targetMap.get(e);if(!c)return;let u=[];if(n===d.CLEAR)u=[...c.values()];else if(a==="length"&&R(e)){const f=ut(o);c.forEach((g,y)=>{(y==="length"||y>=f)&&u.push(g)})}else switch(a!==void 0&&u.push(c.get(a)),n){case d.ADD:R(e)?he(a)&&u.push(c.get("length")):(u.push(c.get(C)),u.push(c.get(ee)));break;case d.DELETE:R(e)||(u.push(c.get(C)),u.push(c.get(ee)));break;case d.SET:R(e)||u.push(c.get(C));break;case d.METHOD:u.push(c.get(d.METHOD));break;case d.EXPLICIT_KEY_CHANGE:u.push(c.get(d.EXPLICIT_KEY_CHANGE));break}if(u.length===1)u[0]&&this.triggerEffects(u[0],i);else{const f=[];for(const g of u)g&&f.push(...g);this.triggerEffects(Ee(f),i)}}triggerEffects(e,n,r){const s=R(e)?e:[...e];for(const i of s)this.triggerEffect(i,n,r)}triggerEffect(e,n,r){this.inEffectSession?this.scheduleEffect(e,n,r):e.run([n],r)}enableTracking(){this.trackStack.push(this.shouldTrack),this.shouldTrack=!0}pauseTracking(){this.trackStack.push(this.shouldTrack),this.shouldTrack=!1}resetTracking(){const e=this.trackStack.pop();this.shouldTrack=e===void 0?!0:e}};Pe.trackOpBit=1;let h=Pe;const te=new Map;function Tt(t,e){const n=t[1]===void 0?t.length<2?1/0:0:t[1],r=n<0?0:n;return r!==1/0?r:e-t[0]}function At(t){I(Array.isArray(t),"only array source can have atom indexes");let e=te.get(t);if(!e){const n=t.map((r,s)=>D(s));e={depCount:0,indexes:n,computed:B(function(){this.manualTrack(t,p.METHOD,d.METHOD)},function(r,s){s.forEach(({method:i,argv:a})=>{if(I(!!i,"trigger info has no method and result"),i==="push"){const o=a.map((l,c)=>D(c+n.length));n.push(...o)}else if(i==="pop")n.pop();else if(i==="shift")n.shift();else if(i==="unshift")n.forEach(o=>o(l=>l+a.length)),n.unshift(...a.map((o,l)=>D(l)));else if(i==="splice"){const o=Tt(a,n.length),l=a.slice(2).map((c,u)=>D(u+a[0]));if(n.splice(a[0],a[1],...l),o!==l.length)for(let c=a[0]+o;c<n.length;c++)n[c](c)}})},function(r){r()})},te.set(t,e)}return e.depCount++,e.indexes}function vt(t){const e=te.get(t);I(!!e,"no dep for this array source found."),e.depCount--,e.depCount<1&&(kt(e.computed),te.delete(t))}function wt(t,e){if(!Zt(t)){if(Array.isArray(t))return t.map((s,i)=>e(s,()=>i));if(t instanceof Map)return new Map(Object.entries(t).map(([s,i])=>[s,e(i,s)]));if(t instanceof Set)return new Set(Array.from(t).map(e));I(!1,"unknown source type for incMap")}let n,r;return e.length>1&&(h.instance.pauseTracking(),r=Array.isArray(t)?At(t):void 0,h.instance.resetTracking()),B(function(){const{manualTrack:s,collectEffect:i}=this;if(s(t,p.METHOD,d.METHOD),s(t,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),Array.isArray(t)?this.effectFramesArray=[]:this.keyToEffectFrames=new WeakMap,Array.isArray(t))return t.map((a,o)=>{const l=i(),c=e(a,r==null?void 0:r[o]);return this.effectFramesArray[o]=l(),c});if(t instanceof Map)return new Map(Array.from(t.entries()).map(([a,o])=>{const l=i(),c=e(o,a);return this.keyToEffectFrames.set(a,l()),[a,c]}));if(t instanceof Set){n=new Map;const a=Array.from(t.values()).map(o=>{const l=i(),c=e(o);return this.keyToEffectFrames.set(o,l()),n.set(o,c),c});return new Set(a)}else I(!1,"non-support map source type")},function(s,i){const{collectEffect:a,destroyEffect:o}=this;i.forEach(({method:l,argv:c,result:u,key:f,newValue:g})=>{var y,M,m,k,b;if(I(!!(l==="splice"||u),"trigger info has no method and result"),Array.isArray(t))if(l==="splice"){const E=c.slice(2),A=[],w=E.map((x,L)=>{const Ge=t[L+c[0]],Ke=a(),Be=e(Ge,r==null?void 0:r[L+c[0]]);return A[L]=Ke(),Be});s.splice(c[0],c[1],...w),this.effectFramesArray.splice(c[0],c[1],...A).forEach(x=>{x.forEach(L=>{o(L)})})}else{const E=f,A=a();s[E]=e(t[E],r==null?void 0:r[E]);const w=A();this.effectFramesArray[E].forEach(x=>{o(x)}),this.effectFramesArray[E]=w}else if(t instanceof Map)if(l==="clear"){const E=Array.from(s.keys());s.clear(),E.forEach(A=>{this.keyToEffectFrames.get(A).forEach(w=>{o(w)})})}else!l&&u&&((y=u.add)==null||y.forEach(({key:E,newValue:A})=>{const w=a();s.set(E,e(A));const x=w();this.keyToEffectFrames.set(E,x)}),(M=u.update)==null||M.forEach(({key:E,newValue:A})=>{const w=a();s.set(E,e(A));const x=w();this.keyToEffectFrames.get(E).forEach(L=>{o(L)}),this.keyToEffectFrames.set(E,x)}),(m=u.remove)==null||m.forEach(({key:E})=>{s.remove(E),this.keyToEffectFrames.get(E).forEach(A=>{o(A)})}));else if(t instanceof Set)if(l==="clear"){const E=Array.from(s.values());s.clear(),E.forEach(A=>{this.keyToEffectFrames.get(A).forEach(w=>{o(w)})})}else!l&&u&&((k=u.add)==null||k.forEach(({newValue:E})=>{const A=a();s.add(e(E));const w=A();this.keyToEffectFrames.set(E,w)}),(b=u.remove)==null||b.forEach(({oldValue:E})=>{const A=n.get(E);s.remove(A),this.keyToEffectFrames.get(E).forEach(w=>{o(w)})}))})},function(s){s()},{onDestroy(){n==null||n.clear(),Array.isArray(t)&&e.length>1&&vt(t)}})}const It=et(`constructor,__proto__,__v_isAtom,${v.IS_REACTIVE}}`),Le=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(le)),bt=Ot(),ke=St(),_=new WeakSet;function St(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=T(this);for(let i=0,a=this.length;i<a;i++)h.instance.track(r,p.GET,i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(T)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){const r=T(this),s=r.length;h.instance.pauseTracking(),_.add(r),h.instance.createEffectSession();let i;h.instance.arrayExplicitKeyDepCount.get(r)?i=r[e].apply(this,n):(i=r[e].apply(r,n),h.instance.trigger(r,d.SET,{key:"length",newValue:i.length})),_.delete(r);let a;return e==="splice"?a=n:e==="push"?a=[s,0,...n]:e==="pop"?a=[s-1,1]:e==="shift"?a=[0,1]:e==="unshift"&&(a=[0,0,...n]),h.instance.trigger(r,d.METHOD,{method:"splice",argv:a}),h.instance.digestEffectSession(),h.instance.resetTracking(),i}}),t.$map=function(e){return wt(this,e)},t}function Ot(t=!1,e=!1){return function(n,r,s){if(r===v.IS_REACTIVE)return!t;if(r===v.IS_ATOM)return!1;if(r===v.IS_READONLY)return t;if(r===v.IS_SHALLOW)return e;if(r===v.RAW&&s===(e?qt:je).get(n))return n;const i=R(n);if(!t&&i&&ne(ke,r))return Reflect.get(ke,r,s);const a=typeof r=="string"&&r[0]==="$",o=a?r.slice(1,1/0):r,l=Reflect.get(n,o,s);return!Te(o)&&!(i&&rt(r))&&h.instance.track(n,p.GET,o),a?Dt(n,o):Te(o)||S(l)||i&&!he(o)?l:W(l)?J(l):l}}function Te(t){return le(t)?Le.has(t):It(t)}function Dt(t,e){function n(r){if(arguments.length===0)return h.instance.track(t,p.GET,e),Reflect.get(t,e);const s=Reflect.get(t,e);Reflect.set(t,e,r),h.instance.trigger(t,d.SET,{key:e,newValue:r,oldValue:s}),_.has(T(t))||h.instance.trigger(t,d.EXPLICIT_KEY_CHANGE,{result:{update:[{key:e,oldValue:s,newValue:r}]}})}return n.toString=()=>{var r;return h.instance.track(t,p.GET,e),(r=Reflect.get(t,e))==null?void 0:r.toString()},n.valueOf=()=>{var r;return h.instance.track(t,p.GET,e),(r=Reflect.get(t,e))==null?void 0:r.valueOf()},q(n,v.IS_REACTIVE,!0),q(n,v.IS_ATOM,!0),n}const xt=Ct();function Ct(t=!1){return function(e,n,r,s){let i=e[n];if(S(i)&&!S(r))return!1;S(r)&&console.warn(`you are assign an atom to ${n.toString()}`),r=T(r);const a=R(e)&&he(n)?Number(n)<e.length:ne(e,n),o=Reflect.set(e,n,r,s);return e===T(s)&&(a?Oe(r,i)&&(h.instance.trigger(e,d.SET,{key:n,newValue:r,oldValue:i}),_.has(T(e))||h.instance.trigger(e,d.EXPLICIT_KEY_CHANGE,{key:n,newValue:r,result:{update:[{key:n,oldValue:i,newValue:r}]}})):(h.instance.trigger(e,d.ADD,{key:n,newValue:r}),_.has(T(e))||h.instance.trigger(e,d.EXPLICIT_KEY_CHANGE,{key:n,newValue:r,result:{add:[{key:n,newValue:r}]}}))),o}}function Vt(t,e){const n=ne(t,e),r=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&(h.instance.trigger(t,d.DELETE,{key:e,newValue:void 0,oldValue:r}),_.has(T(t))||h.instance.trigger(t,d.EXPLICIT_KEY_CHANGE,{result:{remove:[{key:e,oldValue:r}]}})),s}function Mt(t,e){const n=Reflect.has(t,e);return(!le(e)||!Le.has(e))&&h.instance.track(t,p.HAS,e),n}function _t(t){return h.instance.track(t,p.ITERATE,R(t)?"length":ee),Reflect.ownKeys(t)}const Rt={get:bt,set:xt,deleteProperty:Vt,has:Mt,ownKeys:_t},U=t=>Reflect.getPrototypeOf(t);function Ht(t,e,n=!1){t=t[v.RAW];const r=T(t),s=T(e);n||(e!==s&&h.instance.track(r,p.GET,e),h.instance.track(r,p.GET,s));const{has:i}=U(r);if(i.call(r,e))return K(t.get(e));if(i.call(r,s))return K(t.get(s));t!==r&&t.get(e)}function Pt(t,e,n=!1){t=t[v.RAW];const r=T(t),s=T(e);n||(e!==s&&h.instance.track(r,p.GET,e),h.instance.track(r,p.GET,s));const{has:i}=U(r);if(i.call(r,e))return Ae(t,e);if(i.call(r,s))return Ae(t,s);I(!1,`can not find key ${e.toString()}`)}function Ae(t,e){function n(r){if(arguments.length===0)return h.instance.track(t,p.GET,e),t.get(e);const s=t.get(e);t.set(e,r),h.instance.trigger(t,d.SET,{key:e,newValue:r,oldValue:s}),_.has(T(t))||h.instance.trigger(t,d.EXPLICIT_KEY_CHANGE,{result:{update:[{key:e,oldValue:s,newValue:r}]}})}return n.toString=()=>{var r;return h.instance.track(t,p.GET,e),(r=t.get(e))==null?void 0:r.toString()},n.valueOf=()=>{var r;return h.instance.track(t,p.GET,e),(r=t.get(e))==null?void 0:r.valueOf()},q(n,v.IS_REACTIVE,!0),q(n,v.IS_ATOM,!0),n}function Lt(t,e=!1){const n=this[v.RAW],r=T(n),s=T(t);return e||(t!==s&&h.instance.track(r,p.HAS,t),h.instance.track(r,p.HAS,s)),t===s?n.has(t):n.has(t)||n.has(s)}function jt(t,e=!1){return t=t[v.RAW],!e&&h.instance.track(T(t),p.ITERATE,C),Reflect.get(t,"size",t)}function Nt(t){t=T(t);const e=T(this);return U(e).has.call(e,t)||(e.add(t),h.instance.trigger(e,d.ADD,{newValue:t}),_.has(T(e))||h.instance.trigger(e,d.EXPLICIT_KEY_CHANGE,{result:{add:[{newValue:t}]}})),this}function Ft(t,e){e=T(e);const n=T(this),{has:r,get:s}=U(n);let i=r.call(n,t);i||(t=T(t),i=r.call(n,t));const a=s.call(n,t);return n.set(t,e),i?Oe(e,a)&&(h.instance.trigger(n,d.SET,{key:t,newValue:e,oldValue:a}),_.has(n)||h.instance.trigger(n,d.EXPLICIT_KEY_CHANGE,{result:{update:[{key:t,oldValue:a,newValue:e}]}})):(h.instance.trigger(n,d.ADD,{key:t,newValue:e}),_.has(n)||h.instance.trigger(n,d.EXPLICIT_KEY_CHANGE,{result:{add:[{key:t,oldValue:a}]}})),this}function Gt(t){const e=T(this),{has:n,get:r}=U(e);let s=n.call(e,t);s||(t=T(t),s=n.call(e,t));const i=r?r.call(e,t):void 0,a=e.delete(t);return s&&(h.instance.trigger(e,d.DELETE,{key:t,newValue:void 0,oldValue:i}),_.has(T(e))||h.instance.trigger(e,d.EXPLICIT_KEY_CHANGE,{result:{remove:[{key:t,oldValue:i}]}})),a}function Kt(){const t=T(this),e=t.size!==0,n=void 0;_.add(t);const r=t.clear();return _.delete(t),e&&(h.instance.trigger(t,d.CLEAR,{},n),h.instance.trigger(t,d.METHOD,{method:"clear"},n)),r}function Bt(t,e){return function(n,r){const s=this,i=s[v.RAW],a=T(i);return!t&&h.instance.track(a,p.ITERATE,C),i.forEach((o,l)=>n.call(r,K(o),K(l),s))}}function Yt(t,e,n){return function(...r){const s=this[v.RAW],i=T(s),a=oe(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...r);return!e&&h.instance.track(i,p.ITERATE,l?ee:C),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:o?[K(u[0]),K(u[1])]:K(u),done:f}},[Symbol.iterator](){return this}}}}function Xt(){const t={get(e){return Ht(this,e)},$get(e){return Pt(this,e)},get size(){return jt(this)},has:Lt,add:Nt,set:Ft,delete:Gt,clear:Kt,forEach:Bt(!1)};return["keys","values","entries",Symbol.iterator].forEach(e=>{t[e]=Yt(e,!1)}),[t]}const[ve]=Xt(),$t="$get";function zt(t){return(e,n,r)=>n===v.IS_REACTIVE?!t:n===v.IS_READONLY?t:n===v.RAW?e:Reflect.get(ne(ve,n)&&(n in e||n===$t&&e instanceof Map)?ve:e,n,r)}const Wt={get:zt(!1)},je=new WeakMap,qt=new WeakMap;function Jt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ut(t){return t[v.SKIP]||!Object.isExtensible(t)?0:Jt(ct(t))}function J(t,e){const n=[t,!1,Rt,Wt,je],r=e?e(...n):n;return Qt(...r)}J.as=gt(J);function Qt(t,e,n,r,s){if(!it(t)||t[v.RAW])return t;const i=s.get(t);if(i)return i;const a=Ut(t);if(a===0)return t;const o=new Proxy(t,a===2?r:n);return s.set(t,o),o}function Zt(t){return!!(t&&t[v.IS_REACTIVE])}function T(t){const e=t&&t[v.RAW];return e?T(e):t}const K=t=>De(t)?J(t):t;class Y extends re{constructor(e,n,r,s,i,a,o){super(n,r,s,i,a,o),this.getter=n,this.applyPatch=r,this.callbacks=i,this.skipIndicator=a,this.forceAtom=o,this.replace=l=>{this.data.clear();const c=Array.isArray(l)?l:Object.entries(l);this.data=new Map(c),c.forEach(([u,f])=>{h.instance.trigger(this,d.ADD,{key:u,newValue:f})}),h.instance.trigger(this,d.METHOD,{method:"replace",argv:[l]})},this.replaceData=this.replace,e&&(this.data=oe(e)?e:new Map(Array.isArray(e)?e:Object.entries(e)))}set(e,n){const r=this.data.has(e),s=this.data.get(e);this.data.set(e,n),r?h.instance.trigger(this,d.SET,{key:e,newValue:n,oldValue:s}):h.instance.trigger(this,d.ADD,{key:e,newValue:n})}delete(e){if(this.data.has(e)){const n=this.data.get(e);this.data.delete(e),h.instance.trigger(this,d.DELETE,{key:e,newValue:void 0,oldValue:n})}}clear(){const e=Array.from(this.data.entries());this.data.clear(),e.forEach(([n,r])=>{h.instance.trigger(this,d.DELETE,{key:n,oldValue:r})}),h.instance.trigger(this,d.METHOD,{method:"clear"})}get(e){const n=this.data.get(e);return h.instance.track(this,p.GET,e),n}forEach(e){for(let[n,r]of this.data)e(r,n);h.instance.track(this,p.ITERATE,C)}[Symbol.iterator](){let e=0,n=this.data;h.instance.track(this,p.ITERATE,C);const r=Array.from(n.keys());return{next:()=>e<r.length?{value:[this.get(r[e]),r[e]],done:!1}:{done:!0}}}entries(){const e=this,n=[];return new O(null,function(){return this.manualTrack(e,p.ITERATE,C),this.manualTrack(e,p.METHOD,d.METHOD),n.push(...e.data.keys()),Array.from(e.data.entries())},function(r,s){s.forEach(i=>{if(i.type===d.METHOD)i.method==="clear"?(this.splice(0,this.data.length),n.splice(0,n.length)):I(!1,"unreachable");else{const a=i.key,o=i.newValue;if(i.type===d.ADD)this.push([a,o]),n.push(a);else if(i.type===d.SET){const l=n.indexOf(a);this.set(l,[a,o])}else if(i.type===d.DELETE){const l=n.indexOf(a);this.splice(l,1),n.splice(l,1)}else I(!1,"unreachable")}})})}values(){const e=this;return new O(null,function(){return this.manualTrack(e,p.ITERATE,C),this.manualTrack(e,p.METHOD,d.METHOD),Array.from(e.data.values())},function(n,r){r.forEach(s=>{if(s.type===d.METHOD)s.method==="clear"?this.splice(0,this.data.length):I(!1,"unreachable");else if(s.type===d.ADD)this.push(s.newValue);else if(s.type===d.SET){const i=this.data.indexOf(s.oldValue);this.splice(i,1,s.newValue)}else if(s.type===d.DELETE){const i=this.data.indexOf(s.oldValue);this.splice(i,1)}else I(!1,"unreachable")})})}keys(){const e=this;return new O(null,function(){return this.manualTrack(e,p.ITERATE,C),this.manualTrack(e,p.METHOD,d.METHOD),Array.from(e.data.keys())},function(n,r){r.forEach(s=>{if(s.type===d.METHOD)s.method==="clear"?this.splice(0,this.data.length):I(!1,"unreachable");else{const i=s.key;if(s.type===d.ADD)this.push(i);else if(s.type!==d.SET)if(s.type===d.DELETE){const a=this.data.indexOf(i);this.splice(a,1)}else I(!1,"unreachable")}})})}get size(){const e=this;return Q(function(){return this.manualTrack(e,p.ITERATE,C),e.data.size},function(n,r){n(e.data.size)})}}class O extends re{constructor(e,n,r,s,i){super(n,r,s,i,void 0,void 0,!0),this.getter=n,this.applyPatch=r,this.callbacks=i,this.indexKeyDeps=new Map,this.atomIndexesDepCount=0,e&&(this.data=e)}replaceData(e){this.splice(0,this.data.length,...e)}push(...e){return this.splice(this.data.length,0,...e)}pop(){return this.splice(this.data.length-1,1)[0]}shift(){return this.splice(0,1)[0]}unshift(...e){return this.splice(0,0,...e)}splice(e,n,...r){var s,i,a;h.instance.pauseTracking(),h.instance.createEffectSession();const o=this.data.length,l=Math.min(n,o-e)!==r.length?this.data.length:e+r.length,c=[];for(let f=e;f<l;f++)c[f]=this.data[f];const u=this.data.splice(e,n,...r);if(((s=this.indexKeyDeps)==null?void 0:s.size)>0)for(let f=e;f<l;f++)h.instance.trigger(this,d.SET,{key:f,newValue:this.data[f],oldValue:c[f]});if(this.atomIndexes){this.atomIndexes.splice(e,n,...r.map((f,g)=>D(g+e)));for(let f=e;f<l;f++)(a=(i=this.atomIndexes)[f])==null||a.call(i,f)}return h.instance.trigger(this,d.METHOD,{method:"splice",key:C,argv:[e,n,...r],methodResult:u}),h.instance.digestEffectSession(),h.instance.resetTracking(),u}set(e,n){const r=this.data[e];this.data[e]=n,e>this.data.length-1?h.instance.trigger(this,d.ADD,{key:e,newValue:n,oldValue:r}):h.instance.trigger(this,d.SET,{key:e,newValue:n,oldValue:r}),h.instance.trigger(this,d.EXPLICIT_KEY_CHANGE,{key:e,newValue:n,oldValue:r})}at(e){const n=h.instance.track(this,p.GET,e);return n&&!this.indexKeyDeps.has(e)&&this.indexKeyDeps.set(e,n),this.data[e]}forEach(e){for(let n=0;n<this.data.length;n++)e(this.at(n),n);h.instance.track(this,p.ITERATE,C)}[Symbol.iterator](){let e=0,n=this.data;return h.instance.track(this,p.ITERATE,C),{next:()=>e<n.length?{value:this.at(e),done:!1}:{done:!0}}}addAtomIndexesDep(){this.atomIndexesDepCount===0&&(this.atomIndexes=this.data.map((e,n)=>D(n))),this.atomIndexesDepCount++}removeAtomIndexesDep(){this.atomIndexesDepCount--,this.atomIndexesDepCount===0&&(this.atomIndexes=void 0)}map(e,n,r){const s=this;return e.length>1&&s.addAtomIndexesDep(),new O(null,function(){return this.manualTrack(s,p.METHOD,d.METHOD),this.manualTrack(s,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),s.data.map((i,a)=>{var o;const l=N.collectEffect(),c=e(s.at(a),(o=s.atomIndexes)==null?void 0:o[a]);return this.effectFramesArray[a]=l(),c})},function(i,a){a.forEach(o=>{var l;const{method:c,argv:u,key:f}=o;if(I(!!(c==="splice"||f),"trigger info has no method and key"),n&&n(o),c==="splice"){const g=u.slice(2),y=[],M=g.map((m,k)=>{var b;const E=s.at(k+u[0]),A=this.collectEffect(),w=e(E,(b=s.atomIndexes)==null?void 0:b[k+u[0]]);return y[k]=A(),w});this.splice(u[0],u[1],...M),this.effectFramesArray.splice(u[0],u[1],...y).forEach(m=>{m.forEach(k=>{this.destroyEffect(k)})})}else{const g=f,y=this.collectEffect();this.set(g,e(s.at(g),(l=s.atomIndexes)==null?void 0:l[g]));const M=y();this.effectFramesArray[g].forEach(m=>{this.destroyEffect(m)}),this.effectFramesArray[g]=M}})},r,{onDestroy:i=>{e.length>1&&s.removeAtomIndexesDep()}})}reduce(e){const n=this;return new O(null,function(r){this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),this.data=[];for(let s=0;s<n.data.length;s++){const i=N.collectEffect();e(this,n.data[s],s),this.effectFramesArray[s]=i()}return this.data},function(r,s){s.forEach(i=>{const{method:a,argv:o}=i;I(a==="splice"&&o[0]===n.data.length-o.slice(2).length&&o[1]===0,"reduce can only support append");const l=this.data.length,c=o.slice(2);for(let u=0;u<c.length;u++){const f=N.collectEffect();e(this,c[u],u+l),this.effectFramesArray[u]=f()}})})}find(e){const n=this;let r=-1;return Q(function(){return this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),n.data.find((s,i)=>e(s)?(r=i,!0):!1)},function(s,i){i.forEach(a=>{const{method:o,argv:l,key:c}=a;I(!!(o==="splice"||c),"trigger info has no method and key");let u=-1;if(o==="splice"){const f=l[0];r>=f&&(u=f)}else r===c&&(u=c);if(u!==-1){r=-1;for(let f=u;f<n.data.length;f++)if(e(n.data[f])){r=f,s(n.data[f]);return}s(null)}})})}findIndex(e){const n=this;let r=-1;return Q(function(){return this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),n.data.findIndex((s,i)=>e(s)?(r=i,!0):!1)},function(s,i){i.forEach(a=>{const{method:o,argv:l,key:c}=a;I(!!(o==="splice"||c),"trigger info has no method and key");let u=-1;if(o==="splice"){const f=l[0];r>=f&&(u=f)}else r===c&&(u=c);if(u!==-1){r=-1;for(let f=u;f<n.data.length;f++)if(e(n.data[f])){r=f,s(r);return}s(r)}})})}filter(e){const n=this;return new O(null,function(){return this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),n.data.filter(e)},function(r,s){s.forEach(i=>{const{method:a,argv:o,key:l,oldValue:c,methodResult:u}=i;if(I(!!(a==="splice"||l),"trigger info has no method and key"),a==="splice")(u||[]).forEach(f=>{this.data.includes(f)&&this.splice(this.data.indexOf(f),1)}),o.slice(2).forEach(f=>{e(f)&&this.push(f)});else{const f=l,g=n.data[f];e(g)&&this.push(g),this.data.includes(c)&&this.splice(this.data.indexOf(c),1)}})})}groupBy(e){const n=this;return new Y(null,function(){const r=new Map;this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE);for(let s=0;s<n.data.length;s++){const i=n.data[s],a=e(i);r.has(a)||r.set(a,new O([])),r.get(a).push(i)}return r},function(r,s){s.forEach(i=>{const{method:a,argv:o,key:l,oldValue:c,newValue:u,methodResult:f}=i;if(I(!!(a==="splice"||l),"trigger info has no method and key"),a==="splice")(f||[]).forEach(g=>{const y=e(g);this.data.has(y)&&this.data.get(y).splice(this.data.get(y).data.indexOf(g),1)}),o.slice(2).forEach(g=>{const y=e(g);this.data.has(y)||this.data.set(y,new O([])),this.data.get(y).push(g)});else{if(c){const y=e(c);this.data.get(y).splice(this.data.get(y).data.indexOf(c),1)}const g=e(u);this.data.has(g)||this.data.set(g,new O([])),this.data.get(g).push(u)}})})}indexBy(e){const n=this;return new Y(null,function(){const r=new Map;this.manualTrack(n,p.METHOD,d.METHOD),this.manualTrack(n,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE);for(let s=0;s<n.data.length;s++){const i=n.data[s],a=typeof e=="function"?e(i):i[e];I(!r.has(a),"indexBy key is already exist"),r.set(a,i)}return r},function(r,s){s.forEach(i=>{const{method:a,argv:o,key:l,oldValue:c,newValue:u,methodResult:f}=i;if(I(!!(a==="splice"||l),"trigger info has no method and key"),a==="splice")(f||[]).forEach(g=>{const y=typeof e=="function"?e(g):g[e];this.data.delete(y)}),o.slice(2).forEach(g=>{const y=typeof e=="function"?e(g):g[e];I(!this.data.has(y),"indexBy key is already exist"),this.data.set(y,g)});else{const g=typeof e=="function"?e(c):c[e];this.data.delete(g);const y=typeof e=="function"?e(u):u[e];this.data.set(y,u)}})})}get length(){const e=this;return Q(function(){return this.manualTrack(e,p.METHOD,d.METHOD),e.data.length},function(n,r){n(e.data.length)})}onUntrack(e){}createSelection(e,n=!1){return en(this,e,n)}}function en(t,e,n=!1){let r=new Map;return new O(null,function(){this.manualTrack(t,p.METHOD,d.METHOD),this.manualTrack(t,p.EXPLICIT_KEY_CHANGE,d.EXPLICIT_KEY_CHANGE),S(e)?this.manualTrack(e,p.ATOM,"value"):this.manualTrack(e,p.METHOD,d.METHOD);const s=t.data.map((i,a)=>[i,D(!1)]);return s.forEach(([i,a])=>{r.set(i,a)}),(S(e)?e.raw===null?[]:[e.raw]:e.data).forEach(i=>{var a;if(n)(a=s[i])==null||a[1](!0);else{const o=r.get(i);o==null||o(!0)}}),s},function(s,i){i.forEach(a=>{if(a.source===e){S(e)||I(a.method==="splice","currentValues can only support splice");const o=S(e)?a.oldValue===null?[]:[a.oldValue]:a.methodResult||[],l=S(e)?a.newValue===null?[]:[a.newValue]:a.argv.slice(2);if(n)o.forEach(c=>{const u=this.data[c][1];u(!1)}),l.forEach(c=>{const u=this.data[c][1];u==null||u(!0)});else{debugger;o.forEach(c=>{const u=r==null?void 0:r.get(c);u==null||u(!1)}),l.forEach(c=>{const u=r==null?void 0:r.get(c);u==null||u(!0)})}}if(a.source===t){const{method:o,argv:l,key:c,oldValue:u}=a;if(o==="splice"){const f=l[0],g=l[1],y=l.slice(2).length,M=l.slice(2).map(k=>[k,D(!1)]),m=this.splice(f,g,...M);if(m.forEach(([k,b])=>{r.delete(k)}),M.forEach(([k,b])=>{r.set(k,b)}),n){const k=S(e)?[e.raw]:e.data,b=[];k.forEach((E,A)=>{const w=E;if(w>this.data.length-1)b.push(A);else{if(w>=f&&g!==y){const L=w+y-g;r.get(this.data.at(L)[0])(!1)}const x=this.data.at(w)[1];x==null||x(!0)}}),b.length>0&&(S(e)?e(null):b.forEach((E,A)=>{e.splice(b[0]-A,0)}))}else m.forEach(([k,b])=>{S(e)?e.raw===k&&e(null):e.data.indexOf(k)!==-1&&e.splice(e.data.indexOf(k),1)});return}if(r.delete(u),this.data[c]=[t.data[c],D(!1)],n)S(e)?e.raw===c&&this.data[c][1](!0):e.data.includes(c)&&this.data[c][1](!0);else if(S(e))e.raw===u&&e(null);else{const f=e.data.indexOf(u);f!==-1&&e.splice(f,1)}}})},void 0,{onDestroy:s=>{r=null}})}function tn(){}function we(t){const e=typeof t;return e==="string"||e==="number"}function H(t){function e(...n){var r,s,i;function a(o){var l;if(!((l=a.check)!=null&&l.call(a,o)))return new Error("type check failed")}return a.argv=n,a.stringify=(r=t.stringify)==null?void 0:r.bind(a),a.parse=(s=t.parse)==null?void 0:s.bind(a),a.check=(i=t.check)==null?void 0:i.bind(a),a.is=t.is||(o=>o===e),a.zeroValue=t.zeroValue,a.required=t.required,a.createDefaultValue=t.createDefaultValue,a.coerce=t.coerce,a.required||Object.defineProperty(a,"isRequired",{get(){return H({...t,required:!0,is:a.is})(...n)}}),a.createDefaultValue?Object.defineProperty(a,"defaultValue",{get(){if(a.createDefaultValue)return a.createDefaultValue()}}):Object.defineProperty(a,"default",{get(){return o=>H({...t,required:a.required,createDefaultValue:o,is:a.is})(...n)}}),a.valueType={},a}return e}function P(t,e){const{stringify:n=JSON.stringify,parse:r=JSON.parse,is:s,required:i,...a}=e,o=function(l){if(typeof t=="function"&&!t(l))return new Error(`${l} type check failed`);if(typeof t=="string"&&typeof l!==t)return new Error(`${l} is not ${t}`)};return o.stringify=n,o.parse=r,o.check=l=>typeof t=="string"?typeof l===t:t(l),o.is=s||(l=>l===o),o.required=!!i,Object.assign(o,a),o.required||Object.defineProperty(o,"isRequired",{get(){return P(t,{...e,required:!0,is:o.is})}}),o.createDefaultValue?Object.defineProperty(o,"defaultValue",{get(){if(o.createDefaultValue)return o.createDefaultValue()}}):Object.defineProperty(o,"default",{get(){return l=>P(t,{...e,required:o.required,createDefaultValue:l,is:o.is})}}),o.valueType={},o}const nn=H({stringify(t){return t===null?"":we(this.argv[0][0])?t.toString():JSON.stringify(t)},parse(t){return we(this.argv[0][0])?typeof this.argv[0][0]=="string"?t:parseFloat(t):JSON.parse(t)},check(t){return this.argv[0].includes(t)},zeroValue:[]}),rn={zeroValue:""},sn=P("string",rn),an={stringify(t){return t.toString()},parse(t){if(/-?\d+(\.\d+)?/.test(t))return parseFloat(t);throw new Error(`${t} is not a number`)},zeroValue:0},on=P("number",an),cn={zeroValue:null},ln=P(t=>typeof t=="object"&&!Array.isArray(t),cn),un=P(t=>Array.isArray(t),{}),hn={zeroValue:!1},fn=P("bool",hn),dn={stringify(t){return t.toString()},parse(t){return new Function(t)}},pn=P("function",dn),gn=P("symbol",{}),yn={stringify(){throw new Error("type any can not stringify")},parse(){throw new Error("type any can not parse")},check(){throw new Error("type any can not check")}},se=P(()=>!0,yn),En=H({check(t){return this.argv[0].some(e=>e.check(t))},stringify(t){return this.argv[0].find(e=>!(e(t)instanceof Error)).stringify(t)},parse(t){let e;if(!this.argv[0].some(n=>{try{const r=n.parse(t);if(this.check(r))return e=r,!0}catch{}return!1}))throw new Error(`can not parse ${t}`);return e}}),mn=H({check(t){return Array.isArray(t)?t.every(e=>this.argv[0].check(e)):!1},stringify(t){},parse(t){},zeroValue:[]}),kn=H({check(t){return!0},stringify(t){},parse(t){}}),Tn=H({check(t){return Object.entries(this.argv[0]).every(([e,n])=>n.check(t[e]))},stringify(t){return`{${Object.entries(this.argv[0]).map(([e,n])=>`${e}:${JSON.stringify(n.stringify(t[e]))}`).join(",")}`},parse(t){const e=JSON.parse(t);return Object.keys(e).forEach(n=>{e[n]=this.argv[0][n].parse(e[n])}),e}}),An=se,vn=se,wn=se,In=tn;function bn(){return H({coerce:t=>S(t)?t:D(t)})()}function Sn(){return H({coerce:t=>t instanceof O?t:new O(t)})()}function On(){return H({coerce:t=>t instanceof Y?t:new Y(t)})()}const V={string:sn,number:on,object:ln,array:un,bool:fn,function:pn,symbol:gn,node:An,element:vn,elementType:wn,oneOf:nn,oneOfType:En,arrayOf:mn,shapeOf:kn,map:Tn,any:se,checkPropTypes:In,atom:bn,rxList:Sn,rxMap:On};function Dn(t){const e={name:t,Provider({value:n,children:r},{context:s}){return s.set(e,n),r},valueType:null};return e}const fe=Dn("Form");function Ne({name:t,children:e,onChange:n,onSubmit:r,onClear:s,onReset:i,values:a},{createElement:o,context:l}){const c={},u=(m,k,b)=>{b?(a.get(m)||a.set(m,new O([])),c[m]||(c[m]=[]),a.get(m).push(k.value)(c[m]).push(k)):(a.set(m,k.value),c[m]=k)},f=(m,k,b)=>{if(b){const E=a.get(m),A=E.findIndex(x=>x===k.value);A()>-1&&E.splice(A(),1);const w=c[m].findIndex(x=>x===k);w>-1&&c[m].splice(w,1)}else a.delete(m),delete c[m]},g=()=>{r==null||r(a)},y=()=>{Object.values(c).forEach(m=>{Array.isArray(m)?m.forEach(k=>k.reset()):m.reset()}),i==null||i()},M=()=>{Object.values(c).forEach(m=>{Array.isArray(m)?m.forEach(k=>k.clear()):m.clear()}),s==null||s()};return l.set(fe,{name:t,register:u,unregister:f,onChange:n,submit:g,reset:y,clear:M}),e}Ne.propTypes={name:V.string.isRequired,values:V.rxMap(),children:V.any.isRequired,onChange:V.function,onSubmit:V.function,onClear:V.function,onReset:V.function};const xn=new WeakMap;new ResizeObserver(t=>{t.forEach(e=>{const n=e.target,r=xn.get(n);if(r){const s={width:e.contentRect.width,height:e.contentRect.height,borderBoxWidth:e.borderBoxSize[0].inlineSize,borderBoxHeight:e.borderBoxSize[0].blockSize,contentBoxWidth:e.contentBoxSize[0].inlineSize,contentBoxHeight:e.contentBoxSize[0].blockSize};Ze(s,r())||r(s)}})});V.atom().default(()=>D(null)).isRequired,V.atom().default(()=>D("")),V.rxList().default(()=>new O([])).isRequired;const Fe=t=>Array.isArray(t)?t:[t];function Cn(t,e){if(!t)throw new Error(e)}function Vn(t,e,n){return(e||["onChange"]).forEach(s=>{n[s]=Fe(n[s]||[]).concat(t)}),n}const Mn=(t,e)=>{if(S(t))t(e());else if(t instanceof O)t.splice(0,t.length(),...e());else if(t instanceof Y){t.clear();const n=e();typeof n=="object"?Object.keys(n).forEach(r=>t.set(r,n[r])):Array.isArray(n)&&n.forEach((r,s)=>t.set(s,r))}},_n=t=>{S(t)?t(null):t instanceof O?t.splice(0,t.length()):t instanceof Y&&t.clear()};function de(t,e={}){function n({name:r,label:s,defaultValue:i,required:a,multiple:o,value:l,...c},{createElement:u,context:f,useEffect:g}){const y=f.get(fe);if(!y)throw new Error("FormItem should be used in Form");const{register:M,unregister:m,onChange:k}=y,b=()=>e.reset?e.reset(l,i):Mn(l,i),A={value:l,reset:b,clear:()=>e.clear?e.clear(l):_n(l)};return g(()=>(b(),M(r,A,o),()=>{m(r,A,o)})),Vn(k,e.changeEvents,c),u("div",{as:"root"},u("div",{as:"labelContainer"},u("label",{as:"label"},s),()=>a?u("span",{as:"labelRequired"},"*"):null),u(t,{as:"control",...c,value:l}))}return n.propTypes={name:V.string.isRequired,label:V.any,defaultValue:V.function,required:V.bool,...t.propTypes},n}function Rn(t,e){const n={...t};return Object.keys(e).forEach(r=>{r.startsWith("on")||r==="ref"||/^$[0-9a-zA-Z_]+:on.+/.test(r)?r in n?n[r]=Fe(n[r]).concat(e[r]):n[r]=e[r]:n[r]?Cn(!1,`key ${r} already exists in props`):n[r]=e[r]}),n}function pe(t,e){function n(r,{createElement:s,context:i}){const a=i.get(fe);if(!a)throw new Error("FormControl should be used in Form");const{submit:o,clear:l,reset:c}=a,f={...Rn(r,{"$main:onClick":()=>{e==="submit"?o():e==="clear"?l():e==="reset"&&c()}})};return s(t,{...f})}return n.propTypes=t.propTypes,n}const Hn=de(We,{changeEvents:["onInput"]}),Pn=pe(ie,"submit"),Ln=pe(ie,"reset"),jn=pe(ie,"clear"),Ie=de(Se,{}),be=de(qe,{changeEvents:["onInput"]});function Nn({},{createElement:t}){const e={display:"flex",flexDirection:"column",width:"100%",height:"100%",fontSize:14},n={height:50,width:"100%",background:"#1A1A1A",flexGrow:0,flexShrink:0,flexBasis:56,display:"flex",alignItems:"center",color:"#fff",fontSize:14,padding:"0 16px"},r={background:"rgba(0,0,0)",display:"flex",width:"100%",height:"100%",flexGrow:1,alignItems:"center",justifyContent:"center"},s={background:G.panelBg,borderRadius:4,color:"#fff",width:1080,fontSize:16},i={display:"flex",flexDirection:"column",width:560,gap:F.ultra},a=new Xe([]),o=()=>{window.location.href="/init.html"},l=(f,g)=>{const y=16/Math.max(f,g);return{label:t("div",{style:{display:"flex",alignItems:"center"}},t("div",{style:{display:"inline-block",border:"2px solid #fff",width:f*y,height:g*y}}),t("span",{style:{marginLeft:F.small}},`${f}:${g}`)),value:`${f}:${g}`}},c=[l(16,9),l(4,3),l(9,16),l(3,4),l(1,1)],u=[{label:"Short video",value:"short-video"},{label:"Documentary",value:"documentary"},{label:"Movies",value:"movies"},{label:"MV",value:"mv"}];return t("div",{style:e},t("div",{style:n}," One2X "),t("div",{style:r},t("div",{style:s},t(Ne,{name:"project",values:a,onSubmit:o},t("div",{style:{display:"flex",justifyContent:"space-between",margin:"16px 24px"}},t("div",null,"Project Settings"),t("div",null,"x")),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},t("div",{style:i},t(Hn,{name:"name",defaultValue:()=>"defaultValue",placeholder:"Please enter project name",label:"Project Name",required:!0,...X.formItem}),t("div",null,t(Ie,{name:"topic",label:"Topic",defaultValue:()=>u[0],$control:{"$option:_use":Ue},required:!0,options:u,...X.formItem})),t("div",null,t(be,{name:"description",label:"Video description",placeholder:"Please enter video description",defaultValue:()=>"",required:!0,...X.formItem})),t("div",null,t(be,{name:"voiceover",label:"Voiceover description",placeholder:"Please describe the voiceover you want",defaultValue:()=>"",required:!0,...X.formItem})),t("div",null,t(Ie,{name:"ratio",label:"Ratio",defaultValue:()=>c[0],options:c,required:!0,...X.formItem})))),t("div",{style:{display:"flex",gap:F.large,justifyContent:"center",padding:"20px 0",marginTop:F.ultra*3,borderTop:`1px solid ${G.innerBorder}`}},t(Ln,null,"Reset"),t(jn,null,"Clear"),t(Pn,{primary:!0},"Confirm"))))))}const Fn=$e(document.getElementById("root"));Fn.render(ze(Nn,null));
